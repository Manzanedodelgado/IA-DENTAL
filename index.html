<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rubio García Dental - Sistema de Gestión</title>
    <style>
    body {
    box-sizing: border-box;
    }
    * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    }
    body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: #f5f7fa;
    color: #1D1160;
    width: 100%;
    height: 100%;
    overflow: hidden;
    }
    /* LOGIN SCREEN */
    .login-container {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #1D1160 0%, #3340D3 50%, #00C6CC 100%);
    position: relative;
    overflow: hidden;
    }
    .login-container:before {
    content: "";
    position: absolute;
    width: 500px;
    height: 500px;
    background: rgba(207, 242, 20, 0.1);
    border-radius: 50%;
    top: -250px;
    right: -250px;
    }
    .login-container:after {
    content: "";
    position: absolute;
    width: 400px;
    height: 400px;
    background: rgba(0, 198, 204, 0.1);
    border-radius: 50%;
    bottom: -200px;
    left: -200px;
    }
    .login-box {
    background: #ffff;
    padding: 48px 40px;
    border-radius: 20px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    width: 90%;
    max-width: 420px;
    position: relative;
    z-index: 1;
    }
    .login-logo {
    text-align: center;
    margin-bottom: 32px;
    }
    .login-logo img {
    width: auto;
    height: 90px;
    margin-bottom: 16px;
    }
    .login-logo p {
    font-size: 14px;
    color: #8492a6;
    font-weight: 500;
    }
    .form-group {
    margin-bottom: 24px;
    }
    .form-group label {
    display: block;
    font-size: 13px;
    font-weight: 600;
    color: #1D1160;
    margin-bottom: 8px;
    }
    .form-group input, .form-group select, .form-group textarea {
    width: 100%;
    padding: 14px 16px;
    border: 2px solid #e8ecf1;
    border-radius: 10px;
    font-size: 14px;
    font-weight: 500;
    color: #1D1160;
    transition: all 0.3s;
    background: #f5f7fa;
    font-family: inherit;
    }
    .form-group textarea {
    min-height: 100px;
    resize: vertical;
    }
    .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
    outline: none;
    border-color: #00C6CC;
    background: #ffff;
    }
    .form-group input::placeholder, .form-group textarea::placeholder {
    color: #b4bcc8;
    }
    .login-btn, .btn-primary {
    width: 100%;
    padding: 16px;
    background: linear-gradient(135deg, #3340D3 0%, #00C6CC 100%);
    color: #ffff;
    border: none;
    border-radius: 10px;
    font-size: 15px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-top: 8px;
    }
    .btn-primary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    width: auto;
    padding: 12px 24px;
    font-size: 13px;
    }
    .btn-secondary {
    padding: 12px 24px;
    background: #e8ecf1;
    color: #1D1160;
    border: none;
    border-radius: 10px;
    font-size: 13px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    }
    .btn-secondary:hover {
    background: #d1d5db;
    }
    .login-btn:hover, .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(51,64,211,0.4);
    }
    .login-btn:active, .btn-primary:active {
    transform: translateY(0);
    }
    .login-error {
    background: #fee;
    color: #c33;
    padding: 12px 16px;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 600;
    margin-bottom: 16px;
    display: none;
    border-left: 4px solid #c33;
    }
    .login-error.show {
    display: block;
    }
    .login-options {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    flex-wrap: wrap;
    gap: 12px;
    }

    .remember-checkbox {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    user-select: none;
    }

    .remember-checkbox input[type="checkbox"] {
    display: none;
    }

    .checkbox-custom {
    width: 20px;
    height: 20px;
    border: 2px solid #e8ecf1;
    border-radius: 6px;
    background: #f5f7fa;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
    position: relative;
    }

    .remember-checkbox input[type="checkbox"]:checked + .checkbox-custom {
    background: linear-gradient(135deg, #3340D3 0%, #00C6CC 100%);
    border-color: #00C6CC;
    }

    .remember-checkbox input[type="checkbox"]:checked + .checkbox-custom:after {
    content: "";
    width: 5px;
    height: 10px;
    border: solid #ffff;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
    margin-bottom: 2px;
    }
    .checkbox-label {
    font-size: 13px;
    font-weight: 600;
    color: #1D1160;
    }
    .forgot-password {
    font-size: 13px;
    font-weight: 600;
    color: #00C6CC;
    text-decoration: none;
    transition: all 0.2s;
    }
    .forgot-password:hover {
    color: #3340D3;
    text-decoration: underline;
    }
    /* MAIN APP LAYOUT */
    .app-container {
    width: 100%;
    height: 100%;
    display: none;
    }
    .app-container.active {
    display: grid;
    grid-template-columns: 85px 1fr;
    grid-template-rows: auto 1fr;
    }
    /* Sidebar */
    .sidebar {
    grid-row: 1/3;
    background: linear-gradient(180deg, #1D1160 0%, #2a1a7a 100%);
    padding: 24px 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    box-shadow: 6px 0 24px rgba(29, 17, 96, 0.2);
    position: relative;
    border-radius: 0 24px 24px 0;
    }
    .logo-section {
    text-align: center;
    padding: 0 0 20px 0;
    margin-bottom: 20px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.15);
    width: 100%;
    display: flex;
    justify-content: center;
    }
    .logo-circle {
    width: 42px;
    height: 42px;
    border-radius: 10px;
    background: #f5f7fa;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid #00C6CC;
    overflow: hidden;
    padding: 4px;
    }
    .logo-circle img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    }
    .nav-menu {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    width: 100%;
    padding: 0 12px;
    flex: 1;
    }
    .nav-item {
    width: 56px;
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 14px;
    color: rgba(255, 255, 255, 0.6);
    cursor: pointer;
    transition: all 0.3s;
    background: transparent;
    position: relative;
    }
    .nav-item:hover {
    background: rgba(0, 198, 204, 0.15);
    color: #00C6CC;
    transform: translateX(3px);
    }
    .nav-item.active {
    background: linear-gradient(135deg, #3340D3 0%, #00C6CC 100%);
    color: #ffff;
    box-shadow: 0 4px 16px rgba(51, 64, 211, 0.4);
    }
    .nav-icon {
    width: 24px;
    height: 24px;
    stroke: currentColor;
    }
    .user-card {
    margin-top: auto;
    width: 50px;
    height: 50px;
    border-radius: 12px;
    background: #ffff;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid #00C6CC;
    cursor: pointer;
    transition: all 0.3s;
    overflow: hidden;
    position: relative;
    }
    .user-card:hover {
    transform: scale(1.08);
    box-shadow: 0 4px 16px rgba(0, 198, 204, 0.4);
    border-color: #CFF214;
    }
    .user-card img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    }
    .user-menu {
    position: absolute;
    bottom: 70px;
    left: 85px;
    background: #ffff;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    padding: 8px;
    min-width: 200px;
    display: none;
    z-index: 1000;
    }
    .user-menu.show {
    display: block;
    }
    .user-menu-item {
    padding: 12px 16px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 13px;
    font-weight: 600;
    color: #1D1160;
    display: flex;
    align-items: center;
    gap: 10px;
    }
    .user-menu-item:hover {
    background: #f5f7fa;
    color: #00C6CC;
    }
    .user-menu-item.logout {
    color: #c33;
    }
    .user-menu-item.logout:hover {
    background: #fee;
    }
    /* Top Bar */
    .topbar {
    grid-column: 2/3;
    background: #ffff;
    padding: 4px 36px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #e8ecf1;
    box-shadow: 0 1px 4px rgba(29, 17, 96, 0.06);
    height: 37.8px;
    }
    .clinic-header {
    display: flex;
    align-items: center;
    gap: 18px;
    }
    .clinic-header img {
    width: auto;
    height: 28px;
    border: 1px solid #e8ecf1;
    }
    .clinic-info p {
    font-size: 11px;
    color: #8492a6;
    font-weight: 500;
    }
    .topbar-actions {
    display: flex;
    align-items: center;
    gap: 12px;
    }
    .search-box {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 14px;
    background: #f5f7fa;
    border-radius: 8px;
    width: 280px;
    border: 1px solid #e8ecf1;
    }
    .search-box input {
    border: none;
    background: none;
    outline: none;
    font-size: 13px;
    width: 100%;
    color: #1D1160;
    font-weight: 500;
    }
    .search-box input::placeholder {
    color: #b4bcc8;
    }
    .icon-btn {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    background: #f5f7fa;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
    border: 1px solid #e8ecf1;
    }
    .icon-btn:hover {
    background: #e8ecf1;
    border-color: #00C6CC;
    }
    .notification-badge {
    position: absolute;
    top: 8px;
    right: 8px;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #CFF214;
    border: 2px solid #ffff;
    box-shadow: 0 0 8px rgba(207, 242, 20, 0.6);
    }
    /* Content Header Actions */
    .content-header-actions {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 28px;
    padding: 16px 20px;
    background: #ffff;
    border-radius: 12px;
    border: 1px solid #e8ecf1;
    box-shadow: 0 1px 3px rgba(29, 17, 96, 0.06);
    }
    /* Main Content Area */
    .main-content {
    grid-column: 2 / 3;
    padding: 32px;
    overflow-y: auto;
    background: #f5f7fa;
    }
    .page-section {
    display: none;
    }
    .page-section.active {
    display: block;
    }
    .page-header {
    margin-bottom: 28px;
    }
    .page-header img {
    width: auto;
    height: 75.6px;
    margin-bottom: 12px;
    display: block;
    background: transparent;
    }
    .page-header h1 {
    font-size: 16px;
    font-weight: 600;
    color: #8492a6;
    margin-bottom: 0;
    }
    .page-header p {
    font-size: 13px;
    color: #8492a6;
    font-weight: 500;
    }
    /* Dashboard Widgets */
    .stats-horizontal {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    margin-bottom: 28px;
    }
    .stat-box {
    background: #ffff;
    padding: 18px 20px;
    border-radius: 12px;
    border: 1px solid #e8ecf1;
    transition: all 0.2s;
    cursor: pointer;
    box-shadow: 0 1px 3px rgba(29, 17, 96, 0.06);
    }
    .stat-box:hover {
    box-shadow: 0 4px 16px rgba(0, 198, 204, 0.15);
    border-color: #00C6CC;
    transform: translateY(-2px);
    }
    .stat-box-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    gap: 12px;
    }
    .stat-box-left {
    display: flex;
    align-items: center;
    gap: 12px;
    flex: 1;
    }
    .stat-box-icon {
    width: 38px;
    height: 38px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #1D1160 0%, #3340D3 100%);
    flex-shrink: 0;
    transition: all 0.3s;
    }
    .stat-box.active .stat-box-icon {
    background: linear-gradient(135deg, #3340D3 0%, #00C6CC 100%);
    box-shadow: 0 4px 12px rgba(51, 64, 211, 0.4);
    }
    .stat-box-label {
    font-size: 14px;
    color: #1D1160;
    font-weight: 700;
    line-height: 1;
    }
    .stat-box-description {
    font-size: 11px;
    color: #8492a6;
    line-height: 1.4;
    margin-top: 4px;
    }
    .toggle-switch {
    width: 48px;
    height: 26px;
    background: #e8ecf1;
    border-radius: 13px;
    position: relative;
    transition: all 0.3s;
    flex-shrink: 0;
    }
    .toggle-switch.active {
    background: linear-gradient(135deg, #3340D3 0%, #00C6CC 100%);
    }
    .toggle-slider {
    width: 20px;
    height: 20px;
    background: #ffff;
    border-radius: 50%;
    position: absolute;
    top: 3px;
    left: 3px;
    transition: transform 0.3s;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
    }
    .toggle-switch.active .toggle-slider {
    transform: translateX(22px);
    }
    /* Dashboard Grid */
    .dashboard-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 20px;
    margin-bottom: 20px;
    }
    .panel {
    background: #ffff;
    border-radius: 12px;
    padding: 24px;
    border: 1px solid #e8ecf1;
    box-shadow: 0 1px 3px rgba(29, 17, 96, 0.06);
    }
    .panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 14px;
    border-bottom: 1px solid #e8ecf1;
    }
    .panel-title {
    font-size: 16px;
    font-weight: 700;
    color: #1D1160;
    }
    .panel-action {
    font-size: 12px;
    color: #00C6CC;
    font-weight: 600;
    cursor: pointer;
    transition: color 0.2s;
    }
    .panel-action:hover {
    color: #3340D3;
    }
    /* Timeline */
    .timeline-item {
    display: grid;
    grid-template-columns: 80px 1fr;
    gap: 18px;
    padding: 16px 0;
    border-bottom: 1px solid #f0f2f5;
    }
    .timeline-item:last-child {
    border-bottom: none;
    }
    .timeline-time {
    text-align: right;
    padding-right: 18px;
    border-right: 2px solid #00C6CC;
    }
    .time-label {
    font-size: 15px;
    font-weight: 700;
    color: #1D1160;
    margin-bottom: 3px;
    }
    .time-duration {
    font-size: 10px;
    color: #8492a6;
    font-weight: 600;
    }
    .timeline-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    }
    .appointment-info h4 {
    font-size: 14px;
    font-weight: 700;
    color: #1D1160;
    margin-bottom: 5px;
    }
    .appointment-info p {
    font-size: 12px;
    color: #8492a6;
    font-weight: 500;
    }
    .status-pill {
    padding: 6px 14px;
    border-radius: 8px;
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    }
    .status-pill.confirmed {
    background: linear-gradient(135deg, #00C6CC 0%, #00E5CC 100%);
    color: #ffff;
    }
    .status-pill.pending {
    background: #CFF214;
    color: #1D1160;
    }
    /* Messages */
    .urgent-message {
    display: flex;
    gap: 12px;
    padding: 14px;
    border-bottom: 1px solid #f0f2f5;
    background: #ffff;
    border-radius: 8px;
    margin-bottom: 10px;
    cursor: pointer;
    transition: all 0.2s;
    border-left: 3px solid transparent;
    }
    .urgent-message:hover {
    background: #f9fafb;
    border-left-color: #00C6CC;
    }
    .urgent-message:last-child {
    margin-bottom: 0;
    }
    .message-avatar {
    width: 44px;
    height: 44px;
    border-radius: 10px;
    background: linear-gradient(135deg, #1D1160 0%, #3340D3 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 700;
    font-size: 14px;
    flex-shrink: 0;
    }
    .message-content {
    flex: 1;
    }
    .message-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 5px;
    }
    .message-header h5 {
    font-size: 13px;
    font-weight: 700;
    color: #1D1160;
    }
    .message-time {
    font-size: 10px;
    color: #8492a6;
    font-weight: 600;
    }
    .message-text {
    font-size: 12px;
    color: #8492a6;
    margin-bottom: 5px;
    line-height: 1.4;
    }
    .message-badge {
    display: inline-block;
    padding: 3px 8px;
    background: #CFF214;
    color: #1D1160;
    font-size: 9px;
    font-weight: 700;
    border-radius: 10px;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    }
    /* Quick Actions */
    .bottom-section {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
    }
    .quick-stat {
    background: #ffff;
    padding: 24px;
    border-radius: 12px;
    text-align: center;
    border: 1px solid #e8ecf1;
    box-shadow: 0 1px 3px rgba(29, 17, 96, 0.06);
    transition: all 0.2s;
    cursor: pointer;
    }
    .quick-stat:hover {
    box-shadow: 0 4px 16px rgba(0, 198, 204, 0.15);
    transform: translateY(-2px);
    border-color: #00C6CC;
    }
    .quick-stat-icon {
    width: 52px;
    height: 52px;
    border-radius: 12px;
    margin: 0 auto 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    }
    .icon-cita {
    background: linear-gradient(135deg, #1D1160 0%, #3340D3 100%);
    }
    .icon-mensaje {
    background: linear-gradient(135deg, #3340D3 0%, #00C6CC 100%);
    }
    .icon-factura {
    background: linear-gradient(135deg, #00C6CC 0%, #00E5CC 100%);
    }
    .icon-plantilla {
    background: linear-gradient(135deg, #3340D3 0%, #CFF214 100%);
    }
    .quick-stat-label {
    font-size: 13px;
    color: #1D1160;
    font-weight: 600;
    }
    .quick-stat-subtitle {
    font-size: 11px;
    color: #8492a6;
    margin-top: 3px;
    font-weight: 500;
    }
    /* AGENDA STYLES */
    .agenda-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    }
    .calendar-nav {
    display: flex;
    align-items: center;
    gap: 20px;
    }
    .calendar-nav h2 {
    font-size: 24px;
    font-weight: 700;
    color: #1D1160;
    min-width: 200px;
    text-align: center;
    }
    .btn-nav {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    background: #ffff;
    border: 1px solid #e8ecf1;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    }
    .btn-nav:hover {
    background: #f5f7fa;
    border-color: #00C6CC;
    }
    .calendar-container {
    background: #ffff;
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 24px;
    border: 1px solid #e8ecf1;
    }
    .calendar-header {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 8px;
    margin-bottom: 12px;
    }
    .calendar-day-name {
    text-align: center;
    font-size: 12px;
    font-weight: 700;
    color: #8492a6;
    padding: 12px 0;
    text-transform: uppercase;
    }
    .calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 8px;
    }
    .calendar-day {
    aspect-ratio: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    font-weight: 600;
    color: #1D1160;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s;
    background: #f5f7fa;
    position: relative;
    }
    .calendar-day:hover {
    background: #e8ecf1;
    transform: scale(1.05);
    }
    .calendar-day.today {
    background: linear-gradient(135deg, #3340D3 0%, #00C6CC 100%);
    color: #ffff;
    box-shadow: 0 4px 12px rgba(51, 64, 211, 0.3);
    }
    .calendar-day.has-appointments:after {
    content: "";
    position: absolute;
    bottom: 6px;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background: #CFF214;
    }
    .calendar-day.today.has-appointments:after {
    background: #ffff;
    }
    .calendar-day.other-month {
    color: #b4bcc8;
    background: transparent;
    }
    /* Appointment List Styles */
    .appointment-list-item {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 16px;
    background: #ffff;
    border-radius: 12px;
    border: 2px solid #e8ecf1;
    margin-bottom: 12px;
    transition: all 0.3s;
    position: relative;
    }
    .appointment-list-item:hover {
    border-color: #00C6CC;
    box-shadow: 0 4px 16px rgba(0, 198, 204, 0.15);
    }
    .appointment-list-item.urgent {
    border-color: #CFF214;
    background: linear-gradient(135deg, rgba(207, 242, 20, 0.05) 0%, rgba(0, 198, 204, 0.05) 100%);
    }
    .appointment-time-block {
    min-width: 80px;
    text-align: center;
    padding: 12px;
    background: linear-gradient(135deg, #1D1160 0%, #3340D3 100%);
    border-radius: 10px;
    color: #ffff;
    }
    .appointment-list-item.urgent .appointment-time-block {
    background: linear-gradient(135deg, #CFF214 0%, #00C6CC 100%);
    color: #1D1160;
    box-shadow: 0 0 20px rgba(207, 242, 20, 0.5);
    animation: urgentPulse 2s infinite;
    }
    @keyframes urgentPulse {
    0%, 100% { box-shadow: 0 0 20px rgba(207, 242, 20, 0.5); }
    50% { box-shadow: 0 0 30px rgba(207, 242, 20, 0.8); }
    }
    .appointment-time-block .time {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 2px;
    }

    .appointment-time-block .duration {
    font-size: 10px;
    opacity: 0.8;
    font-weight: 600;
    }

    .appointment-details-block {
    flex: 1;
    }

    .appointment-patient-name {
    font-size: 16px;
    font-weight: 700;
    color: #1D1160;
    margin-bottom: 4px;
    }

    .appointment-treatment {
    font-size: 13px;
    color: #8492a6;
    font-weight: 500;
    margin-bottom: 6px;
    }

    .appointment-meta {
    display: flex;
    gap: 12px;
    font-size: 12px;
    color: #8492a6;
    }

    .appointment-meta-item {
    display: flex;
    align-items: center;
    gap: 4px;
    }

    /* Neon Toggle Switch */
    .urgent-toggle {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    }
    .urgent-toggle-label {
    font-size: 9px;
    font-weight: 700;
    text-transform: uppercase;
    color: #8492a6;
    letter-spacing: 0.5px;
    }
    .neon-switch {
    width: 48px;
    height: 28px;
    background: #e8ecf1;
    border-radius: 14px;
    position: relative;
    cursor: pointer;
    transition: all 0.3s;
    border: 2px solid #d1d5db;
    }
    .neon-switch.active {
    background: #CFF214;
    border-color: #CFF214;
    box-shadow: 0 0 20px rgba(207, 242, 20, 0.6),
    0 0 40px rgba(207, 242, 20, 0.4),
    inset 0 0 10px rgba(207, 242, 20, 0.8);
    animation: neonGlow 1.5s infinite alternate;
    }
    @keyframes neonGlow {
    0% {
    box-shadow: 0 0 15px rgba(207, 242, 20, 0.5),
    0 0 30px rgba(207, 242, 20, 0.3),
    inset 0 0 10px rgba(207, 242, 20, 0.6);
    }
    100% {
    box-shadow: 0 0 25px rgba(207, 242, 20, 0.8),
    0 0 50px rgba(207, 242, 20, 0.5),
    inset 0 0 15px rgba(207, 242, 20, 1);
    }
    }
    .neon-switch-slider {
    width: 20px;
    height: 20px;
    background: #ffff;
    border-radius: 50%;
    position: absolute;
    top: 2px;
    left: 2px;
    transition: all 0.3s;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    }
    .neon-switch.active .neon-switch-slider {
    transform: translateX(20px);
    background: #1D1160;
    box-shadow: 0 0 10px rgba(29, 17, 96, 0.8);
    }
    .appointments-list-section {
    background: #ffff;
    border-radius: 12px;
    padding: 24px;
    border: 1px solid #e8ecf1;
    }
    .appointments-list-section h3 {
    font-size: 18px;
    font-weight: 700;
    color: #1D1160;
    margin-bottom: 20px;
    padding-bottom: 14px;
    border-bottom: 1px solid #e8ecf1;
    }
    .appointment-card {
    padding: 16px;
    border-radius: 10px;
    background: #f5f7fa;
    margin-bottom: 12px;
    border-left: 4px solid #00C6CC;
    transition: all 0.2s;
    cursor: pointer;
    }
    .appointment-card:hover {
    background: #e8ecf1;
    transform: translateX(4px);
    }
    .appointment-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
    }
    .appointment-card-header h4 {
    font-size: 15px;
    font-weight: 700;
    color: #1D1160;
    }
    .appointment-card-time {
    font-size: 12px;
    font-weight: 600;
    color: #00C6CC;
    }
    .appointment-card-details {
    font-size: 13px;
    color: #8492a6;
    font-weight: 500;
    }
    /* PACIENTES STYLES */
    .patients-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-bottom: 24px;
    }
    .patient-card {
    background: #ffff;
    border-radius: 12px;
    padding: 20px;
    border: 1px solid #e8ecf1;
    transition: all 0.2s;
    cursor: pointer;
    position: relative;
    }
    .patient-card:hover {
    box-shadow: 0 4px 16px rgba(207, 242, 20, 0.3);
    border-color: #CFF214;
    transform: translateY(-2px);
    }
    .patient-card:before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(180deg, #CFF214 0%, #00C6CC 100%);
    border-radius: 12px 0 0 12px;
    }
    .patient-card-header {
    display: flex;
    gap: 16px;
    margin-bottom: 16px;
    }
    .patient-avatar {
    width: 60px;
    height: 60px;
    border-radius: 12px;
    background: linear-gradient(135deg, #3340D3 0%, #00C6CC 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #ffff;
    font-size: 20px;
    font-weight: 700;
    flex-shrink: 0;
    }
    .patient-info h3 {
    font-size: 16px;
    font-weight: 700;
    color: #1D1160;
    margin-bottom: 4px;
    }
    .patient-info p {
    font-size: 12px;
    color: #8492a6;
    font-weight: 500;
    }
    .patient-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    padding-top: 16px;
    border-top: 1px solid #f0f2f5;
    }
    .patient-stat {
    text-align: center;
    }
    .patient-stat-value {
    font-size: 18px;
    font-weight: 700;
    color: #00C6CC;
    margin-bottom: 2px;
    }
    .patient-stat-label {
    font-size: 10px;
    color: #8492a6;
    font-weight: 600;
    text-transform: uppercase;
    }
    /* MENSAJERIA STYLES */
    .messaging-layout {
    display: grid;
    grid-template-columns: 350px 1fr;
    gap: 20px;
    height: calc(100% - 100px);
    }
    .conversations-panel {
    background: #ffff;
    border-radius: 12px;
    padding: 20px;
    border: 1px solid #e8ecf1;
    overflow-y: auto;
    }
    .conversation-item {
    display: flex;
    gap: 12px;
    padding: 12px;
    border-radius: 10px;
    margin-bottom: 8px;
    cursor: pointer;
    transition: all 0.2s;
    }
    .conversation-item:hover {
    background: #f5f7fa;
    }
    .conversation-item.active {
    background: linear-gradient(135deg, rgba(207, 242, 20, 0.08) 0%, rgba(0, 198, 204, 0.08) 100%);
    border-left: 4px solid #CFF214;
    box-shadow: 0 2px 8px rgba(207, 242, 20, 0.15);
    }
    .chat-panel {
    background: #ffff;
    border-radius: 12px;
    border: 1px solid #e8ecf1;
    display: flex;
    flex-direction: column;
    }

    .chat-header {
    padding: 20px 24px;
    border-bottom: 1px solid #e8ecf1;
    }

    .chat-header h3 {
    font-size: 18px;
    font-weight: 700;
    color: #1D1160;
    }

    .chat-messages {
    flex: 1;
    padding: 24px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 16px;
    }

    .chat-message {
    max-width: 70%;
    padding: 12px 16px;
    border-radius: 12px;
    font-size: 14px;
    line-height: 1.5;
    }

    .chat-message.received {
    background: #f5f7fa;
    color: #1D1160;
    align-self: flex-start;
    }

    .chat-message.sent {
    background: linear-gradient(135deg, #3340D3 0%, #00C6CC 100%);
    color: #ffff;
    align-self: flex-end;
    }

    .chat-input-area {
    padding: 20px 24px;
    border-top: 1px solid #e8ecf1;
    display: flex;
    gap: 12px;
    }
    .chat-input-area input {
    flex: 1;
    padding: 12px 16px;
    border: 2px solid #e8ecf1;
    border-radius: 10px;
    font-size: 14px;
    background: #f5f7fa;
    }
    .chat-input-area input:focus {
    outline: none;
    border-color: #00C6CC;
    background: #ffff;
    }
    /* GESTION STYLES */
    .gestion-tabs {
    display: flex;
    gap: 12px;
    margin-bottom: 24px;
    border-bottom: 2px solid #e8ecf1;
    }
    .gestion-tab {
    padding: 12px 24px;
    font-size: 14px;
    font-weight: 600;
    color: #8492a6;
    cursor: pointer;
    transition: all 0.2s;
    border-bottom: 3px solid transparent;
    margin-bottom: -2px;
    }
    .gestion-tab:hover {
    color: #00C6CC;
    }
    .gestion-tab.active {
    color: #00C6CC;
    border-bottom-color: #00C6CC;
    }
    .invoices-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 20px;
    }
    .invoice-card {
    background: #ffff;
    border-radius: 12px;
    padding: 20px;
    border: 1px solid #e8ecf1;
    transition: all 0.2s;
    cursor: pointer;
    position: relative;
    }
    .invoice-card:hover {
    box-shadow: 0 4px 16px rgba(207, 242, 20, 0.3);
    border-color: #CFF214;
    transform: translateY(-2px);
    }
    .invoice-card:after {
    content: "";
    position: absolute;
    bottom: 0;
    right: 0;
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, transparent 50%, #CFF214 50%);
    opacity: 0.1;
    border-radius: 0 0 12px 0;
    }
    .invoice-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    }
    .invoice-number {
    font-size: 16px;
    font-weight: 700;
    color: #1D1160;
    }
    .invoice-status {
    padding: 4px 12px;
    border-radius: 8px;
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    }
    .invoice-status.paid {
    background: #d4f4dd;
    color: #0a5d1a;
    }
    .invoice-status.pending {
    background: #fff4cc;
    color: #8b6914;
    }
    .invoice-details {
    font-size: 13px;
    color: #8492a6;
    margin-bottom: 16px;
    }
    .invoice-amount {
    font-size: 24px;
    font-weight: 700;
    color: #00C6CC;
    text-align: right;
    }
    /* IA STYLES */
    .ia-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    margin-bottom: 24px;
    }
    .ia-card {
    background: #ffff;
    border-radius: 12px;
    padding: 24px;
    border: 1px solid #e8ecf1;
    transition: all 0.2s;
    position: relative;
    }
    .ia-card:hover {
    box-shadow: 0 4px 16px rgba(207, 242, 20, 0.3);
    border-color: #CFF214;
    transform: translateY(-2px);
    }
    .ia-card:before {
    content: "";
    position: absolute;
    top: -2px;
    right: -2px;
    width: 40px;
    height: 40px;
    background: radial-gradient(circle, #CFF214 0%, transparent 70%);
    opacity: 0.2;
    border-radius: 0 12px 0 0;
    }
    .ia-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    }
    .ia-card-title {
    font-size: 18px;
    font-weight: 700;
    color: #1D1160;
    }
    .ia-badge {
    padding: 6px 12px;
    background: #CFF214;
    color: #1D1160;
    font-size: 10px;
    font-weight: 700;
    border-radius: 8px;
    text-transform: uppercase;
    }
    .ia-stats-row {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid #f0f2f5;
    }
    .ia-stat {
    text-align: center;
    }
    .ia-stat-value {
    font-size: 24px;
    font-weight: 700;
    color: #00C6CC;
    margin-bottom: 4px;
    }
    .ia-stat-label {
    font-size: 11px;
    color: #8492a6;
    font-weight: 600;
    }

    /* CONFIG STYLES */
    .config-sections {
    display: grid;
    gap: 24px;
    }

    .config-card {
    background: #ffff;
    border-radius: 12px;
    padding: 24px;
    border: 1px solid #e8ecf1;
    }

    .config-card h3 {
    font-size: 18px;
    font-weight: 700;
    color: #1D1160;
    margin-bottom: 20px;
    padding-bottom: 14px;
    border-bottom: 1px solid #e8ecf1;
    }

    .users-table {
    width: 100%;
    border-collapse: collapse;
    }

    .users-table th {
    text-align: left;
    padding: 12px;
    font-size: 12px;
    font-weight: 700;
    color: #8492a6;
    text-transform: uppercase;
    border-bottom: 2px solid #e8ecf1;
    }

    .users-table td {
    padding: 16px 12px;
    font-size: 14px;
    color: #1D1160;
    border-bottom: 1px solid #f0f2f5;
    }
    .users-table tr:hover {
    background: linear-gradient(90deg, rgba(207, 242, 20, 0.05) 0%, rgba(0, 198, 204, 0.05) 100%);
    box-shadow: inset 3px 0 0 #CFF214;
    }
    .role-badge {
    padding: 4px 12px;
    border-radius: 8px;
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    background: linear-gradient(135deg, #3340D3 0%, #00C6CC 100%);
    color: #ffff;
    }
    .action-buttons {
    display: flex;
    gap: 8px;
    }
    .btn-icon {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    background: #f5f7fa;
    border: 1px solid #e8ecf1;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    }
    .btn-icon:hover {
    background: #e8ecf1;
    border-color: #00C6CC;
    }
    .btn-icon.delete:hover {
    background: #fee;
    border-color: #c33;
    }
    /* Modal */
    .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(29, 17, 96, 0.7);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    }
    .modal-overlay.show {
    display: flex;
    }
    .modal {
    background: #ffff;
    border-radius: 16px;
    padding: 32px;
    max-width: 500px;
    width: 90%;
    max-height: 90%;
    overflow-y: auto;
    }
    .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    }
    .modal-header h2 {
    font-size: 22px;
    font-weight: 700;
    color: #1D1160;
    }
    .modal-close {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    background: #f5f7fa;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    }
    .modal-close:hover {
    background: #e8ecf1;
    }
    .modal-actions {
    display: flex;
    gap: 12px;
    margin-top: 24px;
    }
    .modal-actions button {
    flex: 1;
    }
    @media (max-width: 1200px) {
    .app-container.active {
    grid-template-columns: 1fr;
    }
    .sidebar {
    grid-row: auto;
    grid-column: 1;
    }
    .topbar, .main-content {
    grid-column: 1;
    }
    .dashboard-grid {
    grid-template-columns: 1fr;
    }
    .stats-horizontal {
    grid-template-columns: repeat(2, 1fr);
    }
    .bottom-section {
    grid-template-columns: repeat(2, 1fr);
    }
    .messaging-layout {
    grid-template-columns: 1fr;
    }
    .conversations-panel {
    display: none;
    }
    .ia-grid {
    grid-template-columns: 1fr;
    }
    }
    @media (max-width: 768px) {
    .stats-horizontal, .bottom-section {
    grid-template-columns: 1fr;
    }
    .search-box {
    width: 100%;
    }
    .patients-grid, .invoices-grid {
    grid-template-columns: 1fr;
    }
    }
    /* ============================
       Branding fixes: force logo orientation and sizing
       ============================ */
    img.logo-icon,
    .login-logo img,
    .logo-circle img,
    .user-card img,
    .page-header img,
    .page-header .logo-img {
      transform: none !important;
      -webkit-transform: none !important;
      object-fit: contain !important;
      width: auto !important;
      max-height: 90px !important;
      display: block !important;
    }
    /* small icons in sidebar/menu */
    .logo-circle img, .user-card img, .nav-item img {
      width: 100% !important;
      height: 100% !important;
      max-width: 64px;
      max-height: 64px;
    }
    </style>
</head>
    <link rel="icon" href="https://cdn.abacus.ai/images/79080d2c-7ca9-4d87-9323-7cf4010a352d.png" />
<body>
    <!-- LOGIN SCREEN -->
    <div class="login-container" id="loginScreen">
    <div class="login-box">
    <div class="login-logo">
    <img src="https://cdn.abacus.ai/images/79080d2c-7ca9-4d87-9323-7cf4010a352d.png" alt="Logo Rubio García Dental">
    <p>Sistema de Gestión Integral</p>
    </div>
    <div class="login-error" id="loginError">
    Usuario o contraseña incorrectos
    </div>
    <form id="loginForm">
    <div class="form-group">
    <label for="loginUser">Usuario o Email</label>
    <input type="text" id="loginUser" placeholder="Introduce tu usuario o email" required>
    </div>
    <div class="form-group">
    <label for="loginPassword">Contraseña</label>
    <input type="password" id="loginPassword" placeholder="Introduce tu contraseña" required>
    </div>
    <div class="login-options">
    <label class="remember-checkbox">
    <input type="checkbox" id="rememberUser">
    <span class="checkbox-custom"></span>
    <span class="checkbox-label">Recordar usuario</span>
    </label>
    <a href="#" class="forgot-password" onclick="handleForgotPassword(event)">¿Olvidaste tu contraseña?</a>
    </div>
    <button type="submit" class="login-btn">Iniciar Sesión</button>
    </form>
    </div>
    </div>

    <!-- MAIN APP -->
    <div class="app-container" id="appContainer">
    <!-- Sidebar -->
    <aside class="sidebar">
    <div class="logo-section">
    <div class="logo-circle">
    <img src="https://cdn.abacus.ai/images/79080d2c-7ca9-4d87-9323-7cf4010a352d.png" srcset="https://cdn.abacus.ai/images/79080d2c-7ca9-4d87-9323-7cf4010a352d.png 1x" alt="Icono" class="logo-icon">
    </div>
    </div>
    <nav class="nav-menu">
    <div class="nav-item active" onclick="navigateTo('dashboard')" data-page="dashboard" title="Dashboard">
    <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <rect x="3" y="3" width="7" height="7" rx="1"></rect>
    <rect x="14" y="3" width="7" height="7" rx="1"></rect>
    <rect x="14" y="14" width="7" height="7" rx="1"></rect>
    <rect x="3" y="14" width="7" height="7" rx="1"></rect>
    </svg>
    </div>
    <div class="nav-item" onclick="navigateTo('agenda')" data-page="agenda" title="Agenda">
    <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
    <line x1="16" y1="2" x2="16" y2="6"></line>
    <line x1="8" y1="2" x2="8" y2="6"></line>
    <line x1="3" y1="10" x2="21" y2="10"></line>
    </svg>
    </div>
    <div class="nav-item" onclick="navigateTo('pacientes')" data-page="pacientes" title="Pacientes">
    <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
    <circle cx="9" cy="7" r="4"></circle>
    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
    </svg>
    </div>
    <div class="nav-item" onclick="navigateTo('mensajeria')" data-page="mensajeria" title="Mensajería">
    <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
    </svg>
    </div>
    <div class="nav-item" onclick="navigateTo('gestion')" data-page="gestion" title="Gestión">
    <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
    <line x1="3" y1="9" x2="21" y2="9"></line>
    <line x1="9" y1="21" x2="9" y2="9"></line>
    </svg>
    </div>
    <div class="nav-item" onclick="navigateTo('ia')" data-page="ia" title="IA">
    <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <circle cx="12" cy="12" r="3"></circle>
    <path d="M12 1v6m0 6v6"></path>
    <path d="M5.6 5.6l4.2 4.2m4.4 4.4l4.2 4.2"></path>
    <path d="M1 12h6m6 0h6"></path>
    <path d="M5.6 18.4l4.2-4.2m4.4-4.4l4.2-4.2"></path>
    </svg>
    </div>
    <div class="nav-item" onclick="navigateTo('configuracion')" data-page="configuracion" title="Configuración" id="navConfig">
    <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <circle cx="12" cy="12" r="3"></circle>
    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
    </svg>
    </div>
    </nav>
    <div class="user-card" onclick="toggleUserMenu()">
    <img src="https://cdn.abacus.ai/images/79080d2c-7ca9-4d87-9323-7cf4010a352d.png" srcset="https://cdn.abacus.ai/images/79080d2c-7ca9-4d87-9323-7cf4010a352d.png 1x" alt="Usuario" class="logo-icon">
    </div>
    <div class="user-menu" id="userMenu">
    <div class="user-menu-item">
    <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
    <circle cx="12" cy="7" r="4"></circle>
    </svg>
    Admin
    </div>
    <div class="user-menu-item logout" onclick="handleLogout()">
    <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
    <polyline points="16 17 21 12 16 7"></polyline>
    <line x1="21" y1="12" x2="9" y2="12"></line>
    </svg>
    Cerrar Sesión
    </div>
    </div>
    </aside>

    <!-- Top Bar -->
    <header class="topbar">
    <div class="clinic-header">
    <div class="clinic-info">
    <p id="currentDateTime">Cargando...</p>
    </div>
    </div>
    <div class="topbar-actions">
    <div class="search-box">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#8492a6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <circle cx="11" cy="11" r="8"></circle>
    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
    </svg>
    <input type="text" placeholder="Buscar...">
    </div>
    <div class="icon-btn">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#8492a6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
    </svg>
    <div class="notification-badge"></div>
    </div>
    <div class="icon-btn">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#8492a6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <circle cx="12" cy="12" r="1"></circle>
    <circle cx="19" cy="12" r="1"></circle>
    <circle cx="5" cy="12" r="1"></circle>
    </svg>
    </div>
    </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
    <!-- DASHBOARD -->
    <section class="page-section active" id="page-dashboard">
    <div class="page-header">
    <img src="https://cdn.abacus.ai/images/79080d2c-7ca9-4d87-9323-7cf4010a352d.png" alt="Logo Rubio García Dental" class="logo-img">
    <h1>Panel de Control</h1>
    </div>
    <div class="content-header-actions">
    <div class="search-box">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#8492a6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <circle cx="11" cy="11" r="8"></circle>
    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
    </svg>
    <input type="text" placeholder="Buscar pacientes, citas...">
    </div>
    <div class="icon-btn">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#8492a6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
    </svg>
    <div class="notification-badge"></div>
    </div>
    <div class="icon-btn">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#8492a6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <circle cx="12" cy="12" r="1"></circle>
    <circle cx="19" cy="12" r="1"></circle>
    <circle cx="5" cy="12" r="1"></circle>
    </svg>
    </div>
    </div>
    <div class="stats-horizontal">
    <div class="stat-box active" onclick="toggleSystem('agenda')">
    <div class="stat-box-header">
    <div class="stat-box-left">
    <div class="stat-box-icon">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#ffff" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
    <line x1="16" y1="2" x2="16" y2="6"></line>
    <line x1="8" y1="2" x2="8" y2="6"></line>
    <line x1="3" y1="10" x2="21" y2="10"></line>
    </svg>
    </div>
    <div class="stat-box-label">Agenda</div>
    </div>
    <div class="toggle-switch active" id="toggle-agenda">
    <div class="toggle-slider"></div>
    </div>
    </div>
    <div class="stat-box-description">Sincronización automática de citas</div>
    </div>
    <div class="stat-box active" onclick="toggleSystem('whatsapp')">
    <div class="stat-box-header">
    <div class="stat-box-left">
    <div class="stat-box-icon">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#ffff" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
    <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
    </svg>
    </div>
    <div class="stat-box-label">WhatsApp</div>
    </div>
    <div class="toggle-switch active" id="toggle-whatsapp">
    <div class="toggle-slider"></div>
    </div>
    </div>
    <div class="stat-box-description">Mensajería automática</div>
    </div>
    <div class="stat-box active" onclick="toggleSystem('auto')">
    <div class="stat-box-header">
    <div class="stat-box-left">
    <div class="stat-box-icon">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#ffff" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
    <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
    </svg>
    </div>
    <div class="stat-box-label">Automatizaciones</div>
    </div>
    <div class="toggle-switch active" id="toggle-auto">
    <div class="toggle-slider"></div>
    </div>
    </div>
    <div class="stat-box-description">Flujos de trabajo automáticos</div>
    </div>
    <div class="stat-box active" onclick="toggleSystem('ai')">
    <div class="stat-box-header">
    <div class="stat-box-left">
    <div class="stat-box-icon">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#ffff" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
    <circle cx="12" cy="12" r="3"></circle>
    <path d="M12 1v6m0 6v6"></path>
    <path d="M5.6 5.6l4.2 4.2m4.4 4.4l4.2 4.2"></path>
    <path d="M1 12h6m6 0h6"></path>
    <path d="M5.6 18.4l4.2-4.2m4.4-4.4l4.2-4.2"></path>
    </svg>
    </div>
    <div class="stat-box-label">Agente Al</div>
    </div>
    <div class="toggle-switch active" id="toggle-ai">
    <div class="toggle-slider"></div>
    </div>
    </div>
    <div class="stat-box-description">Respuestas inteligentes 24/7</div>
    </div>
    </div>
    <div class="dashboard-grid">
    <div class="panel">
    <div class="panel-header">
    <h3 class="panel-title">Agenda de Hoy</h3>
    <span class="panel-action">Ver Todo</span>
    </div>
    <div class="timeline-item">
    <div class="timeline-time">
    <div class="time-label">09:00</div>
    <div class="time-duration">45 min</div>
    </div>
    <div class="timeline-content">
    <div class="appointment-info">
    <h4>María González Pérez</h4>
    <p>Dr. García • Limpieza dental</p>
    </div>
    <div class="status-pill confirmed">Confirmada</div>
    </div>
    </div>
    <div class="timeline-item">
    <div class="timeline-time">
    <div class="time-label">10:30</div>
    <div class="time-duration">90 min</div>
    </div>
    <div class="timeline-content">
    <div class="appointment-info">
    <h4>Carlos Martínez López</h4>
    <p>Dra. Rubio • Implante dental</p>
    </div>
    <div class="status-pill pending">Pendiente</div>
    </div>
    </div>
    <div class="timeline-item">
    <div class="timeline-time">
    <div class="time-label">12:00</div>
    <div class="time-duration">30 min</div>
    </div>
    <div class="timeline-content">
    <div class="appointment-info">
    <h4>Ana Rodríguez Sánchez</h4>
    <p>Dr. García • Ortodoncia - Revisión</p>
    </div>
    <div class="status-pill confirmed">Confirmada</div>
    </div>
    </div>
    <div class="timeline-item">
    <div class="timeline-time">
    <div class="time-label">14:30</div>
    <div class="time-duration">60 min</div>
    </div>
    <div class="timeline-content">
    <div class="appointment-info">
    <h4>Luis Fernández Ruiz</h4>
    <p>Dra. Rubio • Endodoncia</p>
    </div>
    <div class="status-pill confirmed">Confirmada</div>
    </div>
    </div>
    </div>
    <div class="panel">
    <div class="panel-header">
    <h3 class="panel-title">Mensajes Urgentes</h3>
    <span class="panel-action">Ver Todo</span>
    </div>
    <div class="urgent-message">
    <div class="message-avatar">MG</div>
    <div class="message-content">
    <div class="message-header">
    <h5>María González</h5>
    <span class="message-time">Hace 5 min</span>
    </div>
    <p class="message-text">¿Puedo adelantar mi cita para mañana por la tarde?</p>
    <span class="message-badge">Sin leer</span>
    </div>
    </div>
    <div class="urgent-message">
    <div class="message-avatar">CM</div>
    <div class="message-content">
    <div class="message-header">
    <h5>Carlos Martínez</h5>
    <span class="message-time">Hace 15 min</span>
    </div>
    <p class="message-text">Tengo molestias después del implante, ¿es normal?</p>
    <span class="message-badge">Sin leer</span>
    </div>
    </div>
    <div class="urgent-message">
    <div class="message-avatar">PG</div>
    <div class="message-content">
    <div class="message-header">
    <h5>Pedro Gómez</h5>
    <span class="message-time">Hace 45 min</span>
    </div>
    <p class="message-text">¿Cuánto cuesta una limpieza dental completa?</p>
    <span class="message-badge">Sin leer</span>
    </div>
    </div>
    <div class="urgent-message">
    <div class="message-avatar">LT</div>
    <div class="message-content">
    <div class="message-header">
    <h5>Laura Torres</h5>
    <span class="message-time">Hace 1 hora</span>
    </div>
    <p class="message-text">¿Tienen disponibilidad para esta semana?</p>
    <span class="message-badge">Sin leer</span>
    </div>
    </div>
    </div>
    </div>
    <div class="bottom-section">
    <div class="quick-stat" onclick="navigateTo('agenda')">
    <div class="quick-stat-icon icon-cita">
    <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="#ffff" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
    <circle cx="12" cy="12" r="10"></circle>
    <polyline points="12 6 12 12 16 14"></polyline>
    </svg>
    </div>
    <div class="quick-stat-label">Nueva Cita</div>
    <div class="quick-stat-subtitle">Agendar cita</div>
    </div>
    <div class="quick-stat" onclick="navigateTo('pacientes')">
    <div class="quick-stat-icon icon-mensaje">
    <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="#ffff" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
    <circle cx="12" cy="7" r="4"></circle>
    </svg>
    </div>
    <div class="quick-stat-label">Nuevo Paciente</div>
    <div class="quick-stat-subtitle">Crear contacto</div>
    </div>
    <div class="quick-stat" onclick="navigateTo('gestion')">
    <div class="quick-stat-icon icon-factura">
    <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="#ffff" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
    <line x1="8" y1="9" x2="16" y2="9"></line>
    <line x1="8" y1="13" x2="16" y2="13"></line>
    <line x1="8" y1="17" x2="12" y2="17"></line>
    </svg>
    </div>
    <div class="quick-stat-label">Nuevo Documento</div>
    <div class="quick-stat-subtitle">Generar documento</div>
    </div>
    <div class="quick-stat" id="quickUserBtn" onclick="navigateTo('configuracion')">
    <div class="quick-stat-icon icon-plantilla">
    <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="#ffff" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
    <circle cx="9" cy="7" r="4"></circle>
    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
    </svg>
    </div>
    <div class="quick-stat-label">Nuevo Usuario</div>
    <div class="quick-stat-subtitle">Crear usuario</div>
    </div>
    </div>
    </section>

    <!-- AGENDA -->
    <section class="page-section" id="page-agenda">
    <div class="page-header">
    <img src="https://cdn.abacus.ai/images/79080d2c-7ca9-4d87-9323-7cf4010a352d.png" alt="Logo Rubio García Dental" class="logo-img">
    <h1>Agenda de Citas</h1>
    </div>
    <div class="agenda-controls">
    <div class="calendar-nav">
    <button class="btn-nav" onclick="changeMonth(-1)">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <polyline points="15 18 9 12 15 6"></polyline>
    </svg>
    </button>
    <h2 id="currentMonth">Enero 2025</h2>
    <button class="btn-nav" onclick="changeMonth(1)">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
    </button>
    </div>
    <button class="btn-primary">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <line x1="12" y1="5" x2="12" y2="19"></line>
    <line x1="5" y1="12" x2="19" y2="12"></line>
    </svg>
    Nueva Cita
    </button>
    </div>
    <div class="calendar-container">
    <div class="calendar-header">
    <div class="calendar-day-name">Lun</div>
    <div class="calendar-day-name">Mar</div>
    <div class="calendar-day-name">Mié</div>
    <div class="calendar-day-name">Jue</div>
    <div class="calendar-day-name">Vie</div>
    <div class="calendar-day-name">Sáb</div>
    <div class="calendar-day-name">Dom</div>
    </div>
    <div class="calendar-grid" id="calendarGrid">
    <!-- Calendar will be generated by JS -->
    </div>
    </div>
    <div class="appointments-list-section">
    <h3 id="selectedDateTitle">Citas de Hoy - 20 Enero 2025</h3>
    <div id="appointmentsList">
    <!-- Appointments will be generated by JS -->
    </div>
    </div>
    </section>

    <!-- PACIENTES -->
    <section class="page-section" id="page-pacientes">
    <div class="page-header">
    <img src="https://cdn.abacus.ai/images/79080d2c-7ca9-4d87-9323-7cf4010a352d.png" alt="Logo Rubio García Dental" class="logo-img">
    <h1>Gestión de Pacientes</h1>
    </div>
    <div style="margin-bottom: 24px;">
    <button class="btn-primary">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <line x1="12" y1="5" x2="12" y2="19"></line>
    <line x1="5" y1="12" x2="19" y2="12"></line>
    </svg>
    Nuevo Paciente
    </button>
    </div>

    <!-- rest of content unchanged... (pages Mensajería, Gestión, IA, Configuración follow same updated logo img) -->

    </main>
    </div>

    <script>
    // User authentication data
    const users = {
    'JMD': { password: '190582', email: 'info@rubiogarciadental.com', role: 'admin', name: 'JMD'},
    'info@rubiogarciadental.com': { password: '190582', email: 'info@rubiogarciadental.com', role: 'admin', name: 'JMD'}
    };
    let currentUser = null;
    let currentDate = new Date();
    let selectedDate = new Date();

    // Sample appointments data
    const appointmentsData = [
    { id: 1, date: '2025-01-20', time: '09:00', duration: '45 min', patient: 'María González Pérez', doctor: 'Dr. García', treatment: 'Limpieza dental', phone: '+34 612 345 678', urgent: false },
    { id: 2, date: '2025-01-20', time: '10:30', duration: '90 min', patient: 'Carlos Martínez López', doctor: 'Dra. Rubio', treatment: 'Implante dental', phone: '+34 623 456 789', urgent: true },
    { id: 3, date: '2025-01-20', time: '12:00', duration: '30 min', patient: 'Ana Rodríguez Sánchez', doctor: 'Dr. García', treatment: 'Ortodoncia - Revisión', phone: '+34 634 567 890', urgent: false },
    { id: 4, date: '2025-01-20', time: '14:30', duration: '60 min', patient: 'Luis Fernández Ruiz', doctor: 'Dra. Rubio', treatment: 'Endodoncia', phone: '+34 645 678 901', urgent: false },
    { id: 5, date: '2025-01-15', time: '16:00', duration: '45 min', patient: 'Pedro Gómez Torres', doctor: 'Dr. García', treatment: 'Revisión general', phone: '+34 656 789 012', urgent: false },
    { id: 6, date: '2025-01-18', time: '11:00', duration: '60 min', patient: 'Laura Torres Martín', doctor: 'Dra. Rubio', treatment: 'Blanqueamiento dental', phone: '+34 667 890 123', urgent: false },
    { id: 7, date: '2025-01-19', time: '09:30', duration: '120 min', patient: 'José Ramírez Vega', doctor: 'Dr. García', treatment: 'Cirugía de muelas del juicio', phone: '+34 678 901 234', urgent: true },
    { id: 8, date: '2025-01-25', time: '10:00', duration: '45 min', patient: 'Carmen Díaz Ruiz', doctor: 'Dra. Rubio', treatment: 'Limpieza dental', phone: '+34 689 012 345', urgent: false }
    ];

    // Initialize
    function init() {
    updateDateTime();
    setInterval(updateDateTime, 30000);
    generateCalendar();
    renderAppointments();
    loadRememberedUser();
    }

    // Load remembered user
    function loadRememberedUser() {
    const rememberedUser = localStorage.getItem('rememberedUser');
    if (rememberedUser) {
    document.getElementById('loginUser').value = rememberedUser;
    document.getElementById('rememberUser').checked = true;
    }
    }

    // Handle forgot password
    function handleForgotPassword(event) {
    event.preventDefault();
    // Create custom modal overlay
    const modalHTML = `
    <div class="modal-overlay show" id="forgotPasswordModal">
    <div class="modal">
    <div class="modal-header">
    <h2>Recuperar Contraseña</h2>
    <button class="modal-close" onclick="closeForgotPasswordModal()">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <line x1="18" y1="6" x2="6" y2="18"></line>
    <line x1="6" y1="6" x2="18" y2="18"></line>
    </svg>
    </button>
    </div>
    <form onsubmit="submitForgotPassword(event)">
    <div class="form-group">
    <label for="forgotEmail">Email de recuperación</label>
    <input type="email" id="forgotEmail" placeholder="Introduce tu email" required>
    </div>
    <p style="font-size: 13px; color: #8492a6; margin-bottom: 20px;">
    Te enviaremos un enlace para restablecer tu contraseña a este correo electrónico.
    </p>
    <div class="modal-actions">
    <button type="submit" class="btn-primary">Enviar enlace</button>
    <button type="button" class="btn-secondary" onclick="closeForgotPasswordModal()">Cancelar</button>
    </div>
    </form>
    </div>
    </div>`;
    document.body.insertAdjacentHTML('beforeend', modalHTML);
    }

    // Submit forgot password
    function submitForgotPassword(event) {
    event.preventDefault();
    const email = document.getElementById('forgotEmail').value;
    // Simulate sending recovery email
    const modalContent = document.querySelector('#forgotPasswordModal .modal');
    modalContent.innerHTML = `
    <div class="modal-header">
    <h2>Enlace Enviado</h2>
    <button class="modal-close" onclick="closeForgotPasswordModal()">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <line x1="18" y1="6" x2="6" y2="18"></line>
    <line x1="6" y1="6" x2="18" y2="18"></line>
    </svg>
    </button>
    </div>
    <div style="text-align: center; padding: 20px 0;">
    <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="#00C6CC" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
    <circle cx="12" cy="12" r="10"></circle>
    <polyline points="16 12 10 16 8 12"></polyline>
    </svg>
    <h3 style="font-size: 18px; font-weight: 700; color: #1D1160; margin-bottom: 12px;">¡Correo Enviado!</h3>
    <p style="font-size: 14px; color: #8492a6; margin-bottom: 24px;">
    Hemos enviado un enlace de recuperación a <strong>${email}</strong>.<br>Revisa tu bandeja de entrada.
    </p>
    <button type="button" class="btn-primary" onclick="closeForgotPasswordModal()" style="margin: 0 auto;">Entendido</button>
    </div>`;
    }

    // Close forgot password modal
    function closeForgotPasswordModal() {
    const modal = document.getElementById('forgotPasswordModal');
    if (modal) {
    modal.remove();
    }
    }

    // Update date and time
    function updateDateTime() {
    const now = new Date();
    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    const dateStr = now.toLocaleDateString('es-ES', options);
    const timeStr = now.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
    const fullDateTime = `${dateStr.charAt(0).toUpperCase() + dateStr.slice(1)}. ${timeStr}`;

    const dateTimeEl = document.getElementById('currentDateTime');
    if (dateTimeEl) dateTimeEl.textContent = fullDateTime;
    }

    // Handle login
    function handleLogin(event) {
    event.preventDefault();

    const userInput = document.getElementById('loginUser').value.trim();
    const passwordInput = document.getElementById('loginPassword').value;
    const rememberUser = document.getElementById('rememberUser').checked;
    const errorEl = document.getElementById('loginError');

    const user = users[userInput];

    if (user && user.password === passwordInput) {
    currentUser = user;
    errorEl.classList.remove('show');
    // Save or remove remembered user
    if (rememberUser) {
    localStorage.setItem('rememberedUser', userInput);
    } else {
    localStorage.removeItem('rememberedUser');
    }
    showApp();
    } else {
    errorEl.classList.add('show');
    }
    }

    // Show main app
    function showApp() {
    document.getElementById('loginScreen').style.display = 'none';
    document.getElementById('appContainer').classList.add('active');
    // If there's a currentUser name element, update it
    const elName = document.getElementById('currentUserName');
    if (elName) elName.textContent = currentUser.name;
    // Hide config option if not admin
    if (currentUser.role !== 'admin') {
    const cfg = document.getElementById('navConfig');
    if (cfg) cfg.style.display = 'none';
    const quick = document.getElementById('quickUserBtn');
    if (quick) quick.style.display = 'none';
    }
    }

    // Handle logout
    function handleLogout() {
    currentUser = null;
    document.getElementById('appContainer').classList.remove('active');
    document.getElementById('loginScreen').style.display = 'flex';
    document.getElementById('loginForm').reset();
    document.getElementById('userMenu').classList.remove('show');
    // Reset to dashboard
    navigateTo('dashboard');
    }

    // Toggle user menu
    function toggleUserMenu() {
    document.getElementById('userMenu').classList.toggle('show');
    }

    // Close user menu when clicking outside
    document.addEventListener('click', function(event) {
    const userCard = document.querySelector('.user-card');
    const userMenu = document.getElementById('userMenu');
    if (userCard && userMenu && !userCard.contains(event.target) && !userMenu.contains(event.target)) {
    userMenu.classList.remove('show');
    }
    });

    // Navigation
    function navigateTo(page) {
    // Hide all sections
    document.querySelectorAll('.page-section').forEach(section => {
    section.classList.remove('active');
    });

    // Show selected section
    const pageEl = document.getElementById(`page-${page}`);
    if (pageEl) {
    pageEl.classList.add('active');
    }

    // Update nav items
    document.querySelectorAll('.nav-item').forEach(item => {
    item.classList.remove('active');
    });

    const navItem = document.querySelector(`[data-page="${page}"]`);
    if (navItem) {
    navItem.classList.add('active');
    }
    }

    // Toggle system
    function toggleSystem(system) {
    const toggle = document.getElementById(`toggle-${system}`);
    const widget = toggle ? toggle.closest('.stat-box') : null;

    if (toggle && widget) {
    toggle.classList.toggle('active');
    widget.classList.toggle('active');
    }
    }

    // Render appointments for selected date
    function renderAppointments() {
    const container = document.getElementById('appointmentsList');
    const titleEl = document.getElementById('selectedDateTitle');

    if (!container) return;

    const dateStr = formatDateISO(selectedDate);
    const dayAppointments = appointmentsData.filter(apt => apt.date === dateStr);

    // Update title
    const monthNames = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio',
    'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
    const titleDate = `${selectedDate.getDate()} ${monthNames[selectedDate.getMonth()]} ${selectedDate.getFullYear()}`;

    if (titleEl) {
    const isToday = isSameDay(selectedDate, new Date());
    titleEl.textContent = isToday ? `Citas de Hoy - ${titleDate}` : `Citas del ${titleDate}`;
    }

    // Clear and render
    container.innerHTML = "";
    if (dayAppointments.length === 0) {
    container.innerHTML = '<p style="text-align: center; color: #8492a6; padding: 40px; font-size: 14px;">No hay citas programadas para este día</p>';
    return;
    }

    dayAppointments.sort((a, b) => a.time.localeCompare(b.time));
    dayAppointments.forEach(apt => {
    const itemEl = document.createElement('div');
    itemEl.className = `appointment-list-item ${apt.urgent ? 'urgent' : ''}`;
    itemEl.innerHTML = `
    <div class="appointment-time-block">
    <div class="time">${apt.time}</div>
    <div class="duration">${apt.duration}</div>
    </div>
    <div class="appointment-details-block">
    <div class="appointment-patient-name">${apt.patient}</div>
    <div class="appointment-treatment">${apt.treatment}</div>
    <div class="appointment-meta">
    <div class="appointment-meta-item">
    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
    <circle cx="12" cy="7" r="4"></circle>
    </svg>
    ${apt.doctor}
    </div>
    <div class="appointment-meta-item">
    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
    </svg>
    ${apt.phone}
    </div>
    </div>
    </div>
    <div class="urgent-toggle">
    <div class="urgent-toggle-label">Urgente</div>
    <div class="neon-switch ${apt.urgent ? 'active' : ''}" onclick="toggleUrgent(${apt.id})">
    <div class="neon-switch-slider"></div>
    </div>
    </div>`;
    container.appendChild(itemEl);
    });
    }

    // Toggle urgent status
    function toggleUrgent(appointmentId) {
    const apt = appointmentsData.find(a => a.id === appointmentId);
    if (apt) {
    apt.urgent = !apt.urgent;
    renderAppointments();
    }
    }

    // Helper functions
    function formatDateISO(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const day = String(date.getDate()).padStart(2, '0');
    return `${year}-${month}-${day}`;
    }

    function isSameDay(date1, date2) {
    return date1.getFullYear() === date2.getFullYear() &&
    date1.getMonth() === date2.getMonth() &&
    date1.getDate() === date2.getDate();
    }

    // Calendar functions
    function generateCalendar() {
    const grid = document.getElementById('calendarGrid');
    if (!grid) return;
    grid.innerHTML = "";

    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();

    // Update month display
    const monthNames = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio',
    'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
    const monthDisplay = document.getElementById('currentMonth');
    if (monthDisplay) {
    monthDisplay.textContent = `${monthNames[month]} ${year}`;
    }

    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();
    const today = new Date();

    // Adjust for Monday start (0 = Monday, 6 = Sunday)
    const adjustedFirstDay = firstDay === 0 ? 6 : firstDay - 1;

    // Previous month days
    const prevMonthDays = new Date(year, month, 0).getDate();
    for (let i = adjustedFirstDay - 1; i >= 0; i--) {
    const day = prevMonthDays - i;
    const dayEl = document.createElement('div');
    dayEl.className = 'calendar-day other-month';
    dayEl.textContent = day;
    grid.appendChild(dayEl);
    }

    // Current month days
    for (let day = 1; day <= daysInMonth; day++) {
    const dayEl = document.createElement('div');
    dayEl.className = 'calendar-day';
    dayEl.textContent = day;
    const currentDayDate = new Date(year, month, day);
    const dateStr = formatDateISO(currentDayDate);

    // Highlight today
    if (isSameDay(currentDayDate, today)) {
    dayEl.classList.add('today');
    }

    // Highlight selected date
    if (isSameDay(currentDayDate, selectedDate)) {
    dayEl.style.background = 'linear-gradient(135deg, #CFF214 0%, #00C6CC 100%)';
    dayEl.style.color = '#1D1160';
    dayEl.style.fontWeight = '700';
    }

    // Check for appointments
    const hasAppointments = appointmentsData.some(apt => apt.date === dateStr);
    if (hasAppointments) {
    dayEl.classList.add('has-appointments');
    }

    // Add click handler
    dayEl.addEventListener('click', () => selectDate(currentDayDate));
    grid.appendChild(dayEl);
    }

    // Next month days to fill the grid
    const totalCells = grid.children.length;
    const remainingCells = 42 - totalCells; // 6 rows x 7 days
    for (let day = 1; day <= remainingCells; day++) {
    const dayEl = document.createElement('div');
    dayEl.className = 'calendar-day other-month';
    dayEl.textContent = day;
    grid.appendChild(dayEl);
    }
    }

    function changeMonth(direction) {
    currentDate.setMonth(currentDate.getMonth() + direction);
    generateCalendar();
    }

    function selectDate(date) {
    selectedDate = new Date(date);
    generateCalendar();
    renderAppointments();
    }

    // Initialize on load
    document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('loginForm').addEventListener('submit', handleLogin);
    init();
    });
    </script>
</body>
</html>